CXX = g++
CXXFLAGS = -Wall -I../include -O0 -g3 -fmessage-length=0 -c
LDFLAGS = -lpthread -lwsock32 -lsockets
LD = g++
TARGET = echod.exe
RM = del
RMFLAGS = /Q
CP = copy
OBJS = main.o techoclientsocket.o techolog.o techoserver.o \
techoserversocket.o techothread.o techosocketmultiplexer.o
SRCS = main.cpp techoclientsocket.cpp techolog.cpp techoserver.cpp \
techoserversocket.cpp techothread.cpp techosocketmultiplexer.cpp

%.o:	%.cpp
	$(CXX) $(CXXFLAGS) $< -o $@

all:	$(TARGET)
$(TARGET):	$(OBJS)
	$(LD) -o $@ $(OBJS) $(LDFLAGS)
dep:	$(SRCS)
	$(CXX) -MM $(CXXFLAGS) $(SRCS) > .dep
include .dep
clean:
	$(RM) $(RMFLAGS) $(OBJS) $(TARGET)